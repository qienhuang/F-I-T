# GMB results (real run) v0.4
#
# Source: grokking v0.3 Phase A2 FPR sweep ("v0.3_A2_fpr_tradeoff")
# Date: 2026-01-21
# Notes:
# - This run focuses on alarm usability under explicit FPR control.
# - Layer A (AUC/AP) is not re-extracted here; treat as out-of-scope for this run.
# - Lead time values below are means (averaged across seed ranges) for convenience; see CSV tables for details.
schema_version: "v0.4"
meta:
  benchmark: "GMB"
  run_id: "run_grokking_v0_3_A2_tradeoff"
  date: "2026-01-21"
  commit_hash: null
  prereg_path: "docs/benchmarks/gmb_v0_4/gmb_prereg_v0.4.yaml"

boundary:
  task: "grokking_modular_addition_p97"
  model: "2-layer-transformer"
  seeds_eval: ["100-119", "120-139"]

event:
  type: "E_jump"
  t_event_by_seed: {}

summary:
  n_seeds: 40
  n_events: null
  notes: "Real run packaging of v0.3 Phase A2 FPR sweep. See tables/*.csv for canonical numbers."

indicators:
  - name: "v0_3_score_sign_plus1"
    family: "dynamics"
    layer_A:
      auc: null
      ap: null
    layer_B:
      targets: [0.01, 0.02, 0.05, 0.10, 0.15, 0.20]
      achieved:
        - {target: 0.01, achieved: 0.01}
        - {target: 0.02, achieved: 0.02}
        - {target: 0.05, achieved: 0.05}
        - {target: 0.10, achieved: 0.10}
        - {target: 0.15, achieved: 0.15}
        - {target: 0.20, achieved: 0.20}
      ok_targets: 6
      fpr_min: 0.01
      controllability_pass: true
      fpr_floor_detected: false
    layer_C:
      at_fpr:
        - fpr: 0.05
          coverage: 0.35
          lead_time_median: 13714
          lead_time_iqr: null
          lead_time_success: 0.35
        - fpr: 0.10
          coverage: 0.675
          lead_time_median: 12420
          lead_time_iqr: null
          lead_time_success: 0.675
    layer_D:
      family_size: null
      pass_rate: null
      label_flip_rate: null
      sensitivity_notes: "Coverage is identical at FPR=0.05 (35%) across seed ranges; at FPR=0.10 differs by 5pp (70% vs 65%)."
    label: "SUPPORTED_FOR_ALARM"
    diagnostics:
      effective_support_size: null
      tie_dominance: null
      comments: "Operational under explicit FPR control. Lead times are means averaged across seed ranges; see tables/utility_at_fpr.csv."

  - name: "v0_3_score_sign_minus1"
    family: "dynamics"
    layer_A:
      auc: null
      ap: null
    layer_B:
      targets: [0.01, 0.02, 0.05, 0.10, 0.15, 0.20]
      achieved:
        - {target: 0.01, achieved: 0.4425}
        - {target: 0.02, achieved: 0.4425}
        - {target: 0.05, achieved: 0.4425}
        - {target: 0.10, achieved: 0.4425}
        - {target: 0.15, achieved: 0.4425}
        - {target: 0.20, achieved: 0.4425}
      ok_targets: 0
      fpr_min: 0.4407
      controllability_pass: false
      fpr_floor_detected: true
    layer_C:
      at_fpr:
        - fpr: 0.05
          coverage: 0.975
          lead_time_median: 18835
          lead_time_iqr: null
          lead_time_success: 0.975
        - fpr: 0.10
          coverage: 0.975
          lead_time_median: 18835
          lead_time_iqr: null
          lead_time_success: 0.975
    layer_D:
      family_size: null
      pass_rate: null
      label_flip_rate: null
      sensitivity_notes: "Pathological consistency: achieved FPR saturates at ~0.44 across both seed ranges, independent of target threshold."
    label: "RANK_ONLY"
    diagnostics:
      effective_support_size: null
      tie_dominance: null
      comments: "Uncontrollable FPR floor (~0.44): invalid as an alarm score under any low-FPR regime. B1 floor=0.4407, B2 floor=0.4442."

tables:
  gate_summary_path: "tables/gate_summary.csv"
  utility_at_fpr_path: "tables/utility_at_fpr.csv"
  robustness_path: "tables/robustness.csv"

